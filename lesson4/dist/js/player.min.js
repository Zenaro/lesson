"use strict";!function(t,i){function n(t){return t&&t.hasOwnProperty("el")?(this.json=t,this.audio=new Audio,this.index=0,this.list=[],void this.init()):void console.error("function Player constructor error: lack of el")}n.prototype={init:function(){this.render(),this.bind()},render:function(){var t='<div class="audio-player bottom-bar">\n\t\t\t\t<div class="audio-player-core">\n\t\t\t\t\t<div class="play-btns">\n\t\t\t\t\t\t<a href="javascript:void(0);" class="prv" title="上一首"></a>\n\t\t\t\t\t\t<a href="javascript:void(0);"\tclass=\'play-pas\' id="play-pause"></a>\n\t\t\t\t\t\t<a href="javascript:void(0);" class="nxt" title="下一首"></a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="play-album">\n\t\t\t\t\t\t<a href="javascript:void(0);">\n\t\t\t\t\t\t\t<img src="./image/default_album.jpg" alt=""/>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="play-progress">\n\t\t\t\t\t\t<div class="pro-title">\n\t\t\t\t\t\t\t<a href="javascript:void(0);" class="title" title="曲名">歌曲名</a>\n\t\t\t\t\t\t\t<a href="javascript:void(0);" class="singer" title="演绎者">歌手</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="pro-bar">\n\t\t\t\t\t\t\t<div class="barbg">\n\t\t\t\t\t\t\t\t<div class="rdy"></div>\n\t\t\t\t\t\t\t\t<div class="cur" draggable="true">\n\t\t\t\t\t\t\t\t\t<div class="cur-inner">\n\t\t\t\t\t\t\t\t\t\t<span class="btn-cur">\n\t\t\t\t\t\t\t\t\t\t\t<i alt="loading"></i>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<span class="clock">\n\t\t\t\t\t\t\t\t<i>00:00</i>\n\t\t\t\t\t\t\t\t<span> / </span>\n\t\t\t\t\t\t\t\t<em>000:00</em>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="play-ctrl">\n\t\t\t\t\t\t<div class="vlm-bar show">\n\t\t\t\t\t\t\t<div class="barbg">\n\t\t\t\t\t\t\t\t<div class="cur">\n\t\t\t\t\t\t\t\t\t<i class="btn-cur" draggable="true"></i>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<a href="javascript:void(0);" class="icon-vol" title="音量"></a>\n\t\t\t\t\t\t<a href="javascript:void(0);" class="icon-shuffle"></a>\n\t\t\t\t\t\t<div class="show lop-hint">\n\t\t\t\t\t\t\t随机播放\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>';document.querySelector(this.json.el).innerHTML=t},bind:function(){var t=this;document.querySelector(".play-pas").onclick=function(){t.audio.paused?t.play():t.pause()},this.audio.onloadstart=function(){document.querySelector(".btn-cur i").style.visibility="visible"},this.audio.oncanplay=function(){console.log("onplay"),document.querySelector(".btn-cur i").style.visibility="hidden"},this.audio.onprogress=function(){var i=0,n=t.audio.buffered.length;n>0&&(i=~~(t.audio.buffered.end(n-1)/t.audio.duration*1e3)/10,console.log(i),document.querySelector(".rdy").style.width=i+"%")},this.audio.ontimeupdate=function(){var i=t.audio.currentTime/t.audio.duration;i=~~(1e3*i)/10,document.querySelector(".cur-inner").style.width=i+"%",document.querySelector(".clock i").innerHTML=t.parseClock(t.audio.currentTime),document.querySelector(".clock em").innerHTML=t.parseClock(t.audio.duration)}},parseClock:function(t){if(t=parseInt(t),"number"!=typeof t||t!=t)return void console.error("type Error");if(t>3600)return void console.error("out of 3600 s");var i=~~(t/60),n=t%60;return i<10&&(i="0"+i),n<10&&(n="0"+n),i+":"+n},setSrc:function(t){this.audio.src=t,this.list.push(t)},play:function(){return""===this.audio.src?void console.error("null src"):(this.audio.play(),void(document.querySelector("#play-pause").className="play-pas"))},pause:function(){this.audio.pause(),document.querySelector("#play-pause").className="play-ply"},prevStack:function(){this.list.length>1&&this.index>0&&(this.audio.src=this.list[this.index--])}},t.Player=n}(window);